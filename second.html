<html>
    <head>
        <title>CG - Babylon</title>
        <script src="https://preview.babylonjs.com/babylon.js"></script>
        <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
        <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
        <script src="babylon.objFileLoader.js"></script>

        <style>
          html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
          }
          #render {
            width: 100%;
            height: 100%;
            touch-action: none;
          }
        </style>
    <body>
        <canvas id="render" touch-action="none">
        <script>
            var canvas = document.getElementById("render");
            var engine = new BABYLON.Engine(canvas, true);
            var createScene = function() {
                var scene = new BABYLON.Scene(engine);
                    // street
                    var street = BABYLON.MeshBuilder.CreateGround("street", {width: 30, height: 50, subdivisions: 4}, scene);
                    street.position.x = 0;
                    street.position.y = -7.5;

                    street.color = new BABYLON.Color3(1,1,1);
                    // house
                    var wall = BABYLON.MeshBuilder.CreateBox("box", {width: 30, height: 15,size: 1}, scene);
                    wall.position.x =0;
                    wall.position.z = -10;
                    wall.color = new BABYLON.Color3(1,1,255);

                    var wall2 = BABYLON.MeshBuilder.CreateBox("box", {width: 30, height: 15,size: 1}, scene);
                    wall2.position.x =0; 
                    wall2.position.z =10;
                    wall2.rotation.y = Math.PI/2; 

                    var wall3 = BABYLON.MeshBuilder.CreateBox("box", {width: 50, height: 15,size: 1}, scene);
                    wall3.position.x =14.5; 
                    wall3.position.z = 0;
                    wall3.rotation.y = Math.PI/2; 

                    var wall4 = BABYLON.MeshBuilder.CreateBox("box", {width: 50, height: 15,size: 1}, scene);
                    wall4.position.x = -14.5; 
                    wall4.position.z = 0;
                    wall4.rotation.y = Math.PI/2; 


                    // collision house and street
                    street.checkCollisions = true;
                    //street.visibility =0;


                    // camera
                    //var camera = new BABYLON.FlyCamera("Camera", new BABYLON.Vector3(-10, 100, 10.3), scene); // AWSD
                    var camera = new BABYLON.ArcRotateCamera("Camera", 0, Math.PI / 2, 10, new BABYLON.Vector3.Zero(), scene);

                    camera.attachControl(canvas, true);
                    camera.maxCameraSpeed =  0.3;
                    camera.speed = .25;
                    camera.rollCorrect = 10;


                    // gravity
                    scene.gravity = new BABYLON.Vector3(0, -9.81, 0);
                    camera.applyGravity = true;
                    camera.ellipsoid = new BABYLON.Vector3(1, 1, 1);
                    scene.collisionsEnabled = true;
                    camera.checkCollisions = true;
                    scene.checkCollisions = true;
                 


                    // movement camera without crosshair
                    canvas.requestPointerLock = canvas.requestPointerLock;
                    canvas.requestPointerLock()
                    document.exitPointerLock = document.exitPointerLock;
                    canvas.onclick = function() {
                    canvas.requestPointerLock();
                    }
                    // light
                    var light1 = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(2, 1, 0), scene);
                    light1.intensity = 1;

            return scene;
            }
            var scene = createScene();
            engine.runRenderLoop(function() {
            scene.render();
            });
            window.addEventListener("size", function() {
            engine.size();
            });
        </script>
    </body>
</html>
